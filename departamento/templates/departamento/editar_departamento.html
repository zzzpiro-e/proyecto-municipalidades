{% extends 'core/base.html' %}
{% load static %}
{% block title %}Editar Departamento{% endblock %}
{% block content %}

<div class="container-fluid">
    <h4 class="text-secondary mb-3">Editar Departamento</h4>
    <hr>

    <form method="post" action="{% url 'editar_departamento_post' %}">
        {% csrf_token %}
        <input type="hidden" name="departamento_id" value="{{ departamento.id }}">

        <div class="mb-3">
            <label class="form-label">Nombre del Departamento</label>
            <input type="text" name="nombre_departamento" class="form-control"
                   value="{{ departamento.nombre_departamento }}" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Dirección</label>
            <select name="direccion" class="form-select" required>
                <option value="">Seleccione una dirección</option>
                {% for direccion in direcciones %}
                <option value="{{ direccion.id }}"
                        {% if direccion.id == departamento.direccion.id %}selected{% endif %}>
                    {{ direccion.nombre_direccion }}
                </option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Usuario Encargado</label>
            <select name="usuario" class="form-select" required>
                <option value="">Seleccione un usuario encargado</option>
                {% for usuario in usuarios %}
                <option value="{{ usuario.id }}"
                        {% if usuario.id == departamento.usuario.id %}selected{% endif %}>
                    {{ usuario.username }}
                </option>
                {% endfor %}
            </select>
        </div>

        <button class="btn btn-primary">Guardar Cambios</button>
        <a href="{% url 'gestion_departamento' %}" class="btn btn-outline-secondary">Cancelar</a>
    </form>

    {% if messages %}
    <div class="alert alert-success mt-3">
        <ul class="mb-0">{% for message in messages %}<li>{{ message }}</li>{% endfor %}</ul>
    </div>
    {% endif %}
</div>

{% endblock %}
