<h4>Editar Encuesta</h4>
<hr/>

<form method="POST">
  {% csrf_token %}
  <input type="hidden" name="encuesta_id" value="{{ encuesta.id }}">

  <label>Nombre:</label><br>
  <input type="text" name="nombre_encuesta" value="{{ encuesta.nombre_encuesta }}"><br><br>

  <label>Descripción:</label><br>
  <textarea name="descripcion">{{ encuesta.descripcion }}</textarea><br><br>

  <label>Tipo:</label><br>
  <input type="text" name="tipo" value="{{ encuesta.tipo }}"><br><br>

  <label>Prioridad:</label><br>
  <input type="text" name="prioridad" value="{{ encuesta.prioridad }}"><br><br>

  <label>Departamento:</label><br>
  <select name="departamento">
    {% for d in departamentos %}
      <option value="{{ d.id }}" {% if d.id == encuesta.departamento.id %}selected{% endif %}>
        {{ d.nombre_departamento }}
      </option>
    {% endfor %}
  </select><br><br>

  <h4>Preguntas existentes:</h4>
  <div id="preguntas-existentes">
    {% for pregunta in preguntas %}
      <div>
        <input type="hidden" name="pregunta_id[]" value="{{ pregunta.id }}">
        <input type="text" name="pregunta_texto[]" value="{{ pregunta.titulo }}" required>
      </div>
    {% empty %}
      <p>No hay preguntas en esta encuesta.</p>
    {% endfor %}
  </div>

  <h4>Nuevas preguntas:</h4>
  <div id="nuevas-preguntas">
    <input type="text" name="nuevas_preguntas[]" placeholder="Agregar nueva pregunta">
  </div>
  <a href="#" id="agregar-pregunta" style="color: purple; text-decoration: none;">➕ Agregar otra pregunta</a>

  <br><br>

<script>
document.getElementById('agregar-pregunta').addEventListener('click', function(e) {
  e.preventDefault();
  const container = document.getElementById('nuevas-preguntas');
  const nuevoCampo = document.createElement('input');
  nuevoCampo.type = 'text';
  nuevoCampo.name = 'nuevas_preguntas[]';
  nuevoCampo.placeholder = 'Agregar nueva pregunta';
  container.appendChild(document.createElement('br'));
  container.appendChild(nuevoCampo);
});
</script>

  <button type="submit">Guardar cambios</button>
</form>

<br>
<a href="{% url 'main_encuesta' %}">Volver</a>
