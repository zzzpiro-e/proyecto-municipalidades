{% extends 'core/base.html' %}
{% load static %}
{% block title %}Editar Cuadrilla{% endblock %}
{% block content %}

<div class="container-fluid">
    <h4 class="text-secondary mb-3">Editar Cuadrilla</h4>
    <hr>

    <form method="POST" action="{% url 'editar_cuadrilla_post' %}" class="row g-3">
        {% csrf_token %}
        <input type="hidden" name="cuadrilla_id" value="{{ cuadrilla.id }}">

        <!-- Nombre de la cuadrilla -->
        <div class="col-md-6">
            <label for="nombre_cuadrilla" class="form-label">Nombre de la Cuadrilla:</label>
            <input type="text"
                   name="nombre_cuadrilla"
                   id="nombre_cuadrilla"
                   class="form-control"
                   value="{{ cuadrilla.nombre_cuadrilla }}"
                   placeholder="Nombre de la cuadrilla"
                   required>
        </div>

        <!-- Tipo -->
        <div class="col-md-6">
            <label for="tipo" class="form-label">Tipo:</label>
            <input type="text"
                   name="tipo"
                   id="tipo"
                   class="form-control"
                   value="{{ cuadrilla.tipo }}"
                   placeholder="Tipo (Ej: Eléctrica, Jardinería)"
                   required>
        </div>

        <!-- Departamento -->
        <div class="col-md-6">
            <label for="departamento" class="form-label">Departamento:</label>
            <select name="departamento" id="departamento" class="form-select" required>
                <option value="">Seleccione un departamento...</option>
                {% for depto in departamentos %}
                    <option value="{{ depto.id }}"
                        {% if depto.id == cuadrilla.departamento.id %}selected{% endif %}>
                        {{ depto.nombre_departamento }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Usuario -->
        <div class="col-md-6">
            <label for="usuario" class="form-label">Usuario Encargado:</label>
            <select name="usuario" id="usuario" class="form-select" required>
                <option value="">Seleccione un usuario...</option>
                {% for usuario in usuarios %}
                    <option value="{{ usuario.id }}"
                        {% if usuario.id == cuadrilla.usuario.id %}selected{% endif %}>
                        {{ usuario.username }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Botones -->
        <div class="col-12 mt-4">
            <button type="submit" class="btn btn-primary">Guardar Cambios</button>
            <a href="{% url 'gestion_cuadrilla' %}" class="ms-3">Cancelar</a>
        </div>

    </form>

    {% if messages %}
    <div class="alert alert-success mt-3">
        <ul class="mb-0">
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

</div>

{% endblock %}
