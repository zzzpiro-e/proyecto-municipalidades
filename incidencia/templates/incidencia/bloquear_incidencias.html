{% extends 'core/base.html' %}
{% load static %}
{% block title %}Incidencias Bloqueadas{% endblock %}
{% block content %}

<div class="table-responsive">
    <table class="table table-striped table-hover align-middle text-center">
        <thead class="table-dark">
            <tr>
                <th scope="col">Título</th>
                <th scope="col">Tipo</th>
                <th scope="col">Departamento</th>
                <th scope="col">Territorial</th>
                <th scope="col">Estado</th>
                <th scope="col">Acciones</th>
            </tr>
        </thead>
  <tbody>
    {% for i in incidencias %}
      <tr>
        <td>{{ i.titulo }}</td>
        <td>{{ i.tipo }}</td>
        <td>{{ i.departamento.nombre_departamento }}</td>
        <td>{{ i.territorial.usuario.username }}</td>
        <td>{{ i.state }}</td>
        <td>
          <a href="{% url 'ver_incidencia' i.id %}" class="btn btn-outline-dark btn-sm">Ver</a>
          <a href="{% url 'editar_incidencia' i.id %}" class="btn btn-outline-primary btn-sm">Editar </a>
          <a href="{% url 'bloquear_incidencia' i.id %}" class="btn btn-outline-danger btn-sm">
            {% if i.state == "Activo" %}
              Bloquear
            {% else %}
              Activar
            {% endif %}
          </a>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="5">No hay registros</td></tr>
    {% endfor %}
  </tbody>
</table>

{% if messages %}
  <ul>
    {% for message in messages %}
      <li style="color: green;">{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}

<br>
<a href="{% url 'gestion_incidencia' %}" class="btn btn-outline-secondary">Volver al menú</a>
{% endblock %}